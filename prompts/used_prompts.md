# Used Prompts / 사용한 프롬프트

1. 너는 코틀린과 SQLite3의 기술스택을 가진 백앤드 시니어 개발자야. 첨부한 파일을 바탕으로 계정 변경 웹훅 서버를 구성하려 해. 단계적으로 1. 요구사항 분석 2. 설계 3. 비즈니스 로직 개발 및 단위 테스트코드 작성 4. 인프라스트럭처 레이어 및 통합 테스트로 완성할거야. 1번 먼저 가보자. 리드미와 같이 기능적 비기능적 요구사항을 간단히 정리해보았는데 검토해줘.

2. 시퀀스 다이어그램부터 만들자

3. Webhook 수신 및 검증시 아래 헤더를 쓴다고 해
   헤더
   X-Signature: HMAC 서명(필수)
   X-Event-Id: 이벤트 ID(필수)

4. 이제 ERD로 가보자. (업데이트 한 리드미 참고해줘)

5. 한가지 추가로 알려줄게.
   {APPLE}\_ACCOUNT_DELETED는 사용자가 {APPLE}계정을 영구 삭제한 경우 같은 “상위 계정 레벨의 사건” 이야.

6. 이제 다음 단계로 가자. 생성해야하는 api 기준으로 비즈니스 로직 구현하자. 코틀린도 프로젝트 구조가 동일한지도 궁금해

7. ddd 기반으로 구현하고 싶은데 도메인이 적어서 불필요할까?

8. 1번으로 해줘

9. 패키지 주소를 com.acw.webhook 으로 일괄 변경해줘

10. 남은 todo를 다시 리마인드 해줘

11. 단위 테스트 먼저 해보자.

목록을 줄게

서명 검증 성공/실패 케이스
동일 eventId 재전송 시 중복 처리 방지(DB 유니크/로직)
EMAIL_FORWARDING_CHANGED 처리 후 계정 조회 값이 갱신됨
ACCOUNT_DELETED 처리 후 상태가 DELETED로 변경됨
실패 케이스에서 FAILED 기록 및 error_message 저장됨
